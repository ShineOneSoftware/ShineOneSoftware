const G=Math.sqrt(3),O=.5*(G-1),F=(3-G)/6,L=t=>Math.floor(t)|0,E=new Float64Array([1,1,-1,1,1,-1,-1,-1,1,0,-1,0,1,0,-1,0,0,1,0,-1,0,1,0,-1]);function X(t=Math.random){const i=Y(t),s=new Float64Array(i).map(n=>E[n%12*2]),e=new Float64Array(i).map(n=>E[n%12*2+1]);return function(o,r){let h=0,w=0,a=0;const m=(o+r)*O,u=L(o+m),c=L(r+m),f=(u+c)*F,d=u-f,b=c-f,g=o-d,y=r-b;let _,P;g>y?(_=1,P=0):(_=0,P=1);const M=g-_+F,x=y-P+F,C=g-1+2*F,v=y-1+2*F,D=u&255,B=c&255;let R=.5-g*g-y*y;if(R>=0){const S=D+i[B],q=s[S],A=e[S];R*=R,h=R*R*(q*g+A*y)}let z=.5-M*M-x*x;if(z>=0){const S=D+_+i[B+P],q=s[S],A=e[S];z*=z,w=z*z*(q*M+A*x)}let W=.5-C*C-v*v;if(W>=0){const S=D+1+i[B+1],q=s[S],A=e[S];W*=W,a=W*W*(q*C+A*v)}return 70*(h+w+a)}}function Y(t){const s=new Uint8Array(512);for(let e=0;e<512/2;e++)s[e]=e;for(let e=0;e<512/2-1;e++){const n=e+~~(t()*(256-e)),o=s[e];s[e]=s[n],s[n]=o}for(let e=256;e<512;e++)s[e]=s[e-256];return s}const p={color:"hsl(0, 0%, 100%)",arcSpeed:.02,amplitude:1.5,lineWidth:4,blur:60,blurColor:"hsl(217, 91%, 60%)",childNum:2,inset:65,circleSpeed:.003};window.requestAnimationFrame=function(){return window.requestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function l(t,i){this.x=t||0,this.y=i||0}l.add=function(t,i){return new l(t.x+i.x,t.y+i.y)};l.sub=function(t,i){return new l(t.x-i.x,t.y-i.y)};l.prototype={set:function(t,i){return typeof t=="object"&&(i=t.y,t=t.x),this.x=t||0,this.y=i||0,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t){return this.x-=t.x,this.y-=t.y,this},scale:function(t){return this.x*=t,this.y*=t,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){const t=Math.sqrt(this.x*this.x+this.y*this.y);return t&&(this.x/=t,this.y/=t),this},angle:function(){return Math.atan2(this.y,this.x)},distanceTo:function(t){const i=t.x-this.x,s=t.y-this.y;return Math.sqrt(i*i+s*s)},distanceToSq:function(t){const i=t.x-this.x,s=t.y-this.y;return i*i+s*s},clone:function(){return new l(this.x,this.y)}};function j(t,i,s){l.call(this,t,i),this.radius=s||7,this.vec=new l(T(1,-1),T(1,-1)).normalize(),this._easeRadius=this.radius,this._currentRadius=this.radius}j.prototype=function(t){const i=new l(0,0);let s;for(s in t)i[s]=t[s];return i}({color:p.color,dragging:!1,_latestDrag:null,update:function(t,i,s){if(this._currentRadius=T(this._easeRadius,this._easeRadius*.35),this._easeRadius+=(this.radius-this._easeRadius)*.1,!this.dragging){this.vec;{const e=i.x+i.width*.5,n=i.y+i.height*.5,o=Math.atan2(this.y-n,this.x-e)+p.circleSpeed;this.x=e+Math.cos(o)*s,this.y=n+Math.sin(o)*s}}},hitTest:function(t){return this.distanceToSq(t)<900?(this._easeRadius=this.radius*2.5,!0):!1},startDrag:function(){this.dragging=!0,this.vec.set(0,0),this._latestDrag=new l().set(this)},drag:function(t){this._latestDrag.set(this),this.set(t)},endDrag:function(){this.vec=l.sub(this,this._latestDrag),this.dragging=!1},draw:function(t){t.save(),t.fillStyle=this.color,t.beginPath(),t.arc(this.x,this.y,this._currentRadius,0,Math.PI*2,!1),t.fill(),t.shadowBlur=20,t.shadowColor=this.color,t.fillStyle="rgba(0, 0, 0, 1)",t.globalCompositeOperation="lighter",t.beginPath(),t.arc(this.x,this.y,this._currentRadius,0,Math.PI*2,!1),t.fill(),t.restore()}});function N(t,i,s){this.startPoint=t||new l,this.endPoint=i||new l,this.step=s||35,this.children=[]}N.prototype={color:p.color,arcSpeed:p.arcSpeed,amplitude:p.amplitude,lineWidth:p.lineWidth,blur:p.blur,blurColor:p.blurColor,points:null,off:0,_simplexNoise:X(),parent:null,startStep:0,endStep:0,length:function(){return this.startPoint.distanceTo(this.endPoint)},getChildNum:function(){return this.children.length},setChildNum:function(t){const i=this.children;let s,e;const n=this.children.length;if(n>t){for(e=t;e<n;e++)i[e].dispose();i.splice(t,n-t)}else for(e=n;e<t;e++)s=new N,s._setAsChild(this),i.push(s)},update:function(){const t=this.startPoint,i=this.endPoint;let s,e,n,o,r,h,w,a,m,u,c,f,d,b;this.parent&&(this.endStep>this.parent.step&&this._updateStepsByParent(),t.set(this.parent.points[this.startStep]),i.set(this.parent.points[this.endStep]));const g=this.length(),y=l.sub(i,t).normalize().scale(g/this.step),_=y.angle(),P=Math.sin(_),M=Math.cos(_),x=this.points=[],C=this.off+=T(this.arcSpeed,this.arcSpeed*.2);for(s=(this.parent?g*1.5:g)*this.amplitude,s>750&&(s=750),d=0,b=this.step+1;d<b;d++)e=d/60,n=s*this._noise(e-C,0)*.5,o=P*n,r=M*n,h=s*this._noise(e+C,0)*.5,w=P*h,a=M*h,m=Math.sin(Math.PI*(d/(b-1))),u=t.x+y.x*d+(o-w)*m,c=t.y+y.y*d-(r-a)*m,x.push(new l(u,c));const v=this.children;for(d=0,b=v.length;d<b;d++)f=v[d],f.color=this.color,f.arcSpeed=this.arcSpeed*1.35,f.amplitude=this.amplitude,f.lineWidth=this.lineWidth*.75,f.blur=this.blur,f.blurColor=this.blurColor,v[d].update()},draw:function(t){const i=this.points,s=this.children;let e,n,o,r;if(this.blur){for(t.save(),t.globalCompositeOperation="lighter",t.fillStyle="rgba(0, 0, 0, 1)",t.shadowBlur=this.blur,t.shadowColor=this.blurColor,t.beginPath(),e=0,n=i.length;e<n;e++)o=i[e],r=n>1?o.distanceTo(i[e===n-1?e-1:e+1]):0,t.moveTo(o.x+r,o.y),t.arc(o.x,o.y,r,0,Math.PI*2,!1);t.fill(),t.restore()}for(t.save(),t.lineWidth=T(this.lineWidth,.5),t.strokeStyle=this.color,t.beginPath(),e=0,n=i.length;e<n;e++)o=i[e],t[e===0?"moveTo":"lineTo"](o.x,o.y);for(t.stroke(),t.restore(),e=0,n=this.children.length;e<n;e++)s[e].draw(t)},dispose:function(){this._timeoutId&&clearTimeout(this._timeoutId),this._simplexNoise=null},_noise:function(t){let e=1,n=1,o=0,r;for(r=0;r<6;++r)e*=.5,o+=e*(this._simplexNoise(t*n,0)+1)*.5,n*=2;return o},_setAsChild:function(t){if(!(t instanceof N))return;this.parent=t;const i=this,s=function(){i._updateStepsByParent(),i._timeoutId=setTimeout(s,I(1500))};i._timeoutId=setTimeout(s,I(1500))},_updateStepsByParent:function(){if(!this.parent)return;const t=this.parent.step;this.startStep=I(t-2),this.endStep=this.startStep+I(t-this.startStep-2)+2,this.step=this.endStep-this.startStep}};function Q(t,i,s,e){const n=p.inset;this.x=(t!==void 0?t:0)+n,this.y=(i!==void 0?i:0)+n,this.width=(s!==void 0?s:0)-n*2,this.height=(e!==void 0?e:0)-n*2,this.right=this.x+this.width,this.bottom=this.y+this.height}function T(t,i){return typeof t!="number"?Math.random():(typeof i!="number"&&(i=0),Math.random()*(t-i)+i)}function I(t,i){return t?T(t+1,i)|0:0}function k(){let t,i,s,e,n,o,r,h;function w(){if(!a)return;const u=a.getBoundingClientRect();a.width=u.width,a.height=u.height,i=a.width*.5,s=a.height*.5,t=a.getContext("2d");const c=a.width/2-p.inset;o=new Q(0,0,a.width,a.height),n=new l,h=new N,r=[new j(i-c,s,h.lineWidth*1.25),new j(i+c,s,h.lineWidth*1.25)],h.startPoint.set(r[0]),h.endPoint.set(r[1]),h.setChildNum(p.childNum)}const a=document.getElementById("lightning");window.addEventListener("resize",w,!1),w();const m=function(){if(!a)return;t.save(),t.fillStyle=e,t.clearRect(0,0,a.width,a.height),t.restore(),h.startPoint.set(r[0]),h.endPoint.set(r[1]),h.step=Math.ceil(h.length()/10),h.step<5&&(h.step=5),h.update(),h.draw(t);let u,c;const f=r[0].distanceTo(r[1]).toFixed(0);for(u=0;u<2;u++)c=r[u],c.dragging&&c.drag(n),c.update(r,o,f/2),c.draw(t);requestAnimationFrame(m)};m()}setTimeout(k,1e3);document.addEventListener("astro:after-swap",k);
